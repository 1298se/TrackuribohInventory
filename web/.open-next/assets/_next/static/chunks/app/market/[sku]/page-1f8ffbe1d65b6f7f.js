(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[297],{22258:(e,t,a)=>{Promise.resolve().then(a.bind(a,97649))},25016:(e,t,a)=>{"use strict";a.d(t,{cn:()=>n});var s=a(2821),r=a(75889);function n(){for(var e=arguments.length,t=Array(e),a=0;a<e;a++)t[a]=arguments[a];return(0,r.QP)((0,s.$)(t))}},36242:(e,t,a)=>{"use strict";a.d(t,{p:()=>x});var s=a(95155),r=a(83101),n=a(25016);function l(e){let{className:t,...a}=e;return(0,s.jsx)("div",{"data-slot":"empty",className:(0,n.cn)("flex min-w-0 flex-1 flex-col items-center justify-center gap-6 text-balance rounded-lg border-dashed p-6 text-center md:p-12",t),...a})}function i(e){let{className:t,...a}=e;return(0,s.jsx)("div",{"data-slot":"empty-header",className:(0,n.cn)("flex max-w-sm flex-col items-center gap-2 text-center",t),...a})}let o=(0,r.F)("mb-2 flex shrink-0 items-center justify-center [&_svg]:pointer-events-none [&_svg]:shrink-0",{variants:{variant:{default:"bg-transparent",icon:"bg-muted text-foreground flex size-10 shrink-0 items-center justify-center rounded-lg [&_svg:not([class*='size-'])]:size-6"}},defaultVariants:{variant:"default"}});function c(e){let{className:t,variant:a="default",...r}=e;return(0,s.jsx)("div",{"data-slot":"empty-icon","data-variant":a,className:(0,n.cn)(o({variant:a,className:t})),...r})}function d(e){let{className:t,...a}=e;return(0,s.jsx)("div",{"data-slot":"empty-title",className:(0,n.cn)("text-lg font-medium tracking-tight",t),...a})}function u(e){let{className:t,...a}=e;return(0,s.jsx)("div",{"data-slot":"empty-description",className:(0,n.cn)("text-muted-foreground [&>a:hover]:text-primary text-sm/relaxed [&>a]:underline [&>a]:underline-offset-4",t),...a})}function m(e){let{className:t,...a}=e;return(0,s.jsx)("div",{"data-slot":"empty-content",className:(0,n.cn)("flex w-full min-w-0 max-w-sm flex-col items-center gap-4 text-balance text-sm",t),...a})}function x(e){let{icon:t,title:a,description:r,action:n,className:o=""}=e;return(0,s.jsxs)(l,{className:o,children:[(0,s.jsxs)(i,{children:[t&&(0,s.jsx)(c,{variant:"icon",children:(0,s.jsx)(t,{})}),(0,s.jsx)(d,{children:a}),r&&(0,s.jsx)(u,{children:r})]}),n&&(0,s.jsx)(m,{children:n})]})}},42152:(e,t,a)=>{"use strict";function s(e){return!(null==e||"number"==typeof e&&isNaN(e))&&("string"!=typeof e||""!==e)&&("boolean"!=typeof e||!1!==e)&&("number"!=typeof e||0!==e)}function r(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"USD";return null==e?"N/A":new Intl.NumberFormat("en-US",{style:"currency",currency:t}).format(e)}function n(e){return e.find(e=>"NM"===e.condition.abbreviation)}a.d(t,{dT:()=>n,vv:()=>r,zz:()=>s})},54664:(e,t,a)=>{"use strict";a.d(t,{w:()=>i});var s=a(95155),r=a(12115),n=a(57268),l=a(25016);let i=r.forwardRef((e,t)=>{let{className:a,orientation:r="horizontal",decorative:i=!0,...o}=e;return(0,s.jsx)(n.b,{ref:t,decorative:i,orientation:r,className:(0,l.cn)("shrink-0 bg-border","horizontal"===r?"h-px w-full":"h-full w-px",a),...o})});i.displayName=n.b.displayName},59121:(e,t,a)=>{"use strict";a.d(t,{H:()=>s});let s=a(95704).env.NEXT_PUBLIC_API_BASE_URL||"http://localhost:8000"},63961:(e,t,a)=>{"use strict";a.d(t,{cz:()=>o,II:()=>l,qD:()=>d,P5:()=>p,o_:()=>m});var s=a(59121),r=a(86560);async function n(e){return(await fetch("".concat(s.H,"/catalog/product/").concat(e))).json()}function l(e){return(0,r.j)({queryKey:["product",e],queryFn:()=>n(e)})}async function i(e){return(await fetch("".concat(s.H,"/market/product/").concat(e,"/market-prices"))).json()}function o(e){return(0,r.j)({queryKey:["product-market-prices",e],queryFn:()=>i(e)})}async function c(e){let{query:t,productType:a,setId:r,limit:n}=e,l=new URLSearchParams;l.set("query",t),l.set("catalog_id","067820ab-e61f-7a87-8000-f9c5e424c0c0"),a&&l.set("product_type",a),r&&l.set("set_id",r),void 0!==n&&l.set("limit",n.toString());let i=await fetch("".concat(s.H,"/catalog/search?").concat(l.toString()));return await i.json()}function d(e){let{query:t,productType:a,setId:s,limit:n}=e;return(0,r.j)({queryKey:["search",t,a,s,n],queryFn:()=>c({query:t,productType:a,setId:s,limit:n})})}async function u(){let e=await fetch("".concat(s.H,"/catalog/sets"));if(!e.ok)throw Error("Failed to fetch sets");return e.json()}function m(){return(0,r.j)({queryKey:["sets"],queryFn:u})}async function x(){let e=await fetch("".concat(s.H,"/catalog/product-types"));if(!e.ok)throw Error("Failed to fetch product types");return e.json()}function p(){return(0,r.j)({queryKey:["product-types"],queryFn:x})}},67812:(e,t,a)=>{"use strict";a.d(t,{E:()=>i});var s=a(95155);a(12115);var r=a(83101),n=a(25016);let l=(0,r.F)("inline-flex items-center rounded-md border px-2.5 py-0.5 text-xs font-semibold transition-colors focus:outline-hidden focus:ring-2 focus:ring-ring focus:ring-offset-2",{variants:{variant:{default:"border-transparent bg-primary text-primary-foreground shadow-sm hover:bg-primary/80",secondary:"border-transparent bg-secondary text-secondary-foreground hover:bg-secondary/80",destructive:"border-transparent bg-destructive text-destructive-foreground shadow-sm hover:bg-destructive/80",outline:"text-foreground"}},defaultVariants:{variant:"default"}});function i(e){let{className:t,variant:a,...r}=e;return(0,s.jsx)("div",{className:(0,n.cn)(l({variant:a}),t),...r})}},68122:(e,t,a)=>{"use strict";a.d(t,{E:()=>n});var s=a(95155),r=a(25016);function n(e){let{className:t,...a}=e;return(0,s.jsx)("div",{className:(0,r.cn)("animate-pulse rounded-md bg-primary/10",t),...a})}},74752:(e,t,a)=>{"use strict";a.d(t,{X:()=>o});var s=a(95155),r=a(12115),n=a(25016),l=a(42196),i=a(15239);function o(e){let{src:t,alt:a,className:o,containerClassName:c,fallbackClassName:d,productType:u,...m}=e,[x,p]=r.useState(!1);return(0,s.jsx)("div",{className:(0,n.cn)("relative h-16 w-16",c),...m,children:x?"CARDS"===u?(0,s.jsx)(i.default,{src:"/assets/placeholder-pokemon-back.png",alt:"Pokemon card back",fill:!0,className:(0,n.cn)("object-contain rounded-xs",o)}):(0,s.jsx)("div",{className:(0,n.cn)("h-full w-full flex items-center justify-center rounded-xs bg-white border",d),children:(0,s.jsxs)("div",{className:"flex flex-col items-center justify-center p-1 text-center",children:[(0,s.jsx)(l.A,{className:"h-6 w-6 text-muted-foreground"}),(0,s.jsx)("span",{className:"text-xs text-muted-foreground mt-1",children:"No image"})]})}):(0,s.jsx)("img",{src:t,alt:a,className:(0,n.cn)("h-full w-full object-contain rounded-xs",o),onError:()=>{p(!0)}})})}},83209:(e,t,a)=>{"use strict";a.d(t,{BT:()=>o,Wu:()=>c,ZB:()=>i,Zp:()=>n,aR:()=>l});var s=a(95155);a(12115);var r=a(25016);function n(e){let{className:t,...a}=e;return(0,s.jsx)("div",{"data-slot":"card",className:(0,r.cn)("bg-card text-card-foreground flex flex-col gap-6 rounded-xl border py-6 shadow-sm",t),...a})}function l(e){let{className:t,...a}=e;return(0,s.jsx)("div",{"data-slot":"card-header",className:(0,r.cn)("@container/card-header grid auto-rows-min grid-rows-[auto_auto] items-start gap-1.5 px-6 has-data-[slot=card-action]:grid-cols-[1fr_auto] [.border-b]:pb-6",t),...a})}function i(e){let{className:t,...a}=e;return(0,s.jsx)("div",{"data-slot":"card-title",className:(0,r.cn)("leading-none font-semibold",t),...a})}function o(e){let{className:t,...a}=e;return(0,s.jsx)("div",{"data-slot":"card-description",className:(0,r.cn)("text-muted-foreground text-sm",t),...a})}function c(e){let{className:t,...a}=e;return(0,s.jsx)("div",{"data-slot":"card-content",className:(0,r.cn)("px-6",t),...a})}},83856:(e,t,a)=>{"use strict";function s(e,t){if(null==e)throw Error(t||"Expected value to not be null or undefined, but got ".concat(e))}function r(e,t){if(!e)throw Error(t||"Assertion failed: expected truthy value, got ".concat(e))}a.d(t,{J:()=>s,v:()=>r})},86075:(e,t,a)=>{"use strict";function s(e){var t;let{imageUrl:a,size:s=400}=e,r=null==(t=a.match(/\/product\/(\d+)_200w\.jpg/))?void 0:t[1];return r?"https://tcgplayer-cdn.tcgplayer.com/product/".concat(r,"_in_").concat(s,"x").concat(s,".jpg"):a}a.d(t,{I:()=>s})},90235:(e,t,a)=>{"use strict";a.d(t,{J:()=>c});var s=a(95155),r=a(12115),n=a(10489),l=a(83101),i=a(25016);let o=(0,l.F)("text-sm font-medium leading-none peer-disabled:cursor-not-allowed peer-disabled:opacity-70"),c=r.forwardRef((e,t)=>{let{className:a,...r}=e;return(0,s.jsx)(n.b,{ref:t,className:(0,i.cn)(o(),a),...r})});c.displayName=n.b.displayName},90923:(e,t,a)=>{"use strict";a.d(t,{Xi:()=>c,av:()=>d,j7:()=>o,tU:()=>i});var s=a(95155),r=a(12115),n=a(60574),l=a(25016);let i=n.bL,o=r.forwardRef((e,t)=>{let{className:a,...r}=e;return(0,s.jsx)(n.B8,{ref:t,className:(0,l.cn)("inline-flex h-9 items-center justify-center rounded-lg bg-muted p-1 text-muted-foreground",a),...r})});o.displayName=n.B8.displayName;let c=r.forwardRef((e,t)=>{let{className:a,...r}=e;return(0,s.jsx)(n.l9,{ref:t,className:(0,l.cn)("inline-flex items-center justify-center whitespace-nowrap rounded-md px-3 py-1 text-sm font-medium ring-offset-background transition-all focus-visible:outline-hidden focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 data-[state=active]:bg-background data-[state=active]:text-foreground data-[state=active]:shadow-sm",a),...r})});c.displayName=n.l9.displayName;let d=r.forwardRef((e,t)=>{let{className:a,...r}=e;return(0,s.jsx)(n.UC,{ref:t,className:(0,l.cn)("mt-2 ring-offset-background focus-visible:outline-hidden focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2",a),...r})});d.displayName=n.UC.displayName},97003:(e,t,a)=>{"use strict";a.d(t,{$:()=>d});var s=a(95155),r=a(12115),n=a(32467),l=a(83101),i=a(35299),o=a(25016);let c=(0,l.F)("inline-flex items-center justify-center gap-2 whitespace-nowrap rounded-md text-sm font-medium transition-colors focus-visible:outline-hidden focus-visible:ring-1 focus-visible:ring-ring disabled:pointer-events-none disabled:opacity-50 [&_svg]:pointer-events-none [&_svg]:size-4 [&_svg]:shrink-0",{variants:{variant:{default:"bg-primary text-primary-foreground shadow-sm hover:bg-primary/90",destructive:"bg-destructive text-destructive-foreground shadow-xs hover:bg-destructive/90",outline:"border border-input bg-background shadow-xs hover:bg-accent hover:text-accent-foreground",secondary:"bg-secondary text-secondary-foreground shadow-xs hover:bg-secondary/80",ghost:"hover:bg-accent hover:text-accent-foreground",link:"text-primary underline-offset-4 hover:underline"},size:{default:"h-9 px-4 py-2",sm:"h-8 rounded-md px-3 text-xs",lg:"h-10 rounded-md px-8",icon:"h-9 w-9"}},defaultVariants:{variant:"default",size:"default"}}),d=r.forwardRef((e,t)=>{let{className:a,variant:r,size:l,asChild:d=!1,loading:u=!1,disabled:m,children:x,...p}=e,f=d?n.DX:"button";return(0,s.jsxs)(f,{className:(0,o.cn)(c({variant:r,size:l,className:a})),ref:t,disabled:m||u,...p,children:[u&&(0,s.jsx)(i.A,{className:"mr-2 h-4 w-4 animate-spin"}),x]})});d.displayName="Button"},97649:(e,t,a)=>{"use strict";a.r(t),a.d(t,{default:()=>eG});var s=a(95155),r=a(12115),n=a(86075),l=a(59121),i=a(86560);function o(e){if(!(null==e?void 0:e.market_data_items))return null;let t=e.market_data_items,a=Array.from(new Set(t.filter(e=>"NM"!==e.sku.condition.abbreviation).map(e=>e.marketplace))),s=a[0]||"",r=t.filter(e=>e.marketplace===s),n=r.map(e=>e.sku),l=n.length>1,i={marketplaces:a,selectedMarketplace:s,itemsForMarketplace:r,skusForMarketplace:n,isAggregated:l},o=(()=>{var e;if(!i.itemsForMarketplace.length)return[];let{itemsForMarketplace:t,isAggregated:a}=i;if(a){let e=new Map;t.forEach(t=>{let{market_data:a}=t,s=0;a.cumulative_depth_levels.forEach(t=>{let{price:a,cumulative_count:r}=t,n=r-s;e.set(a,(e.get(a)||0)+n),s=r})});let a=Array.from(e.keys()).sort((e,t)=>e-t),s=0;return a.map(t=>(s+=e.get(t),{price:t,cumulative_count:s}))}return(null==(e=t[0])?void 0:e.market_data.cumulative_depth_levels)||[]})(),c=(()=>{var e;if(!i.itemsForMarketplace.length)return[];let{itemsForMarketplace:t,isAggregated:a}=i;if(a){let e=new Map;t.forEach(t=>{let{market_data:a}=t,s=0;a.cumulative_sales_depth_levels.forEach(t=>{let{price:a,cumulative_count:r}=t,n=r-s;e.set(a,(e.get(a)||0)+n),s=r})});let a=Array.from(e.keys()).sort((e,t)=>e-t),s=0;return a.map(t=>(s+=e.get(t),{price:t,cumulative_count:s}))}return(null==(e=t[0])?void 0:e.market_data.cumulative_sales_depth_levels)||[]})(),d=o.map(e=>{let{price:t,cumulative_count:a}=e;return{price:t,cumulativeCount:a}}),u=(()=>{if(!c.length)return[];let e=Math.max(...c.map(e=>e.cumulative_count));return c.map(t=>{let{price:a,cumulative_count:s}=t;return{price:a,cumulativeCount:e-s}})})(),m=(()=>{var e;if(!i.itemsForMarketplace.length)return null;let{itemsForMarketplace:t,isAggregated:a}=i;if(a){let e=t.reduce((e,t)=>e+t.market_data.total_listings,0),a=t.reduce((e,t)=>e+t.market_data.total_quantity,0),s=t.reduce((e,t)=>e+t.market_data.total_sales,0);return{total_listings:e,total_quantity:a,total_sales:s,sales_velocity:s/7}}return(null==(e=t[0])?void 0:e.market_data)||null})();return{...i,listingDepthLevels:o,salesDepthLevels:c,listingChartData:d,salesChartData:u,metrics:m}}async function c(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:7;return(await fetch("".concat(l.H,"/market/products/").concat(e,"?sales_lookback_days=").concat(t))).json()}async function d(e){return(await fetch("".concat(l.H,"/market/product/").concat(e,"/listings"))).json()}var u=a(63961),m=a(22454),x=a(20063),p=a(83209),f=a(25016),h=a(68122);function g(e){let{title:t,value:a,subtitle:r,icon:n,valueColorClass:l,isLoading:i}=e;return i?(0,s.jsxs)(p.Zp,{children:[(0,s.jsxs)(p.aR,{className:"pb-2",children:[(0,s.jsx)(h.E,{className:"h-4 w-3/4 mb-1"}),(0,s.jsx)(h.E,{className:"h-8 w-1/2"})]}),(0,s.jsx)(p.Wu,{children:(0,s.jsx)(h.E,{className:"h-3 w-full"})})]}):(0,s.jsxs)(p.Zp,{className:"gap-2",children:[(0,s.jsxs)(p.aR,{className:"pb-2",children:[(0,s.jsxs)(p.BT,{className:"flex justify-between items-center",children:[t," ",n&&(0,s.jsx)(n,{className:"h-4 w-4 text-muted-foreground"})]}),(0,s.jsx)(p.ZB,{className:(0,f.cn)("text-2xl font-bold",l),children:a})]}),r&&(0,s.jsx)(p.Wu,{children:(0,s.jsx)("div",{className:"text-xs text-muted-foreground",children:r})})]})}var v=a(54664),j=a(64828),b=a(47734),y=a(73697),N=a(77568),w=a(26991),k=a(23508),_=a(7620);let C={light:"",dark:".dark"},S=r.createContext(null);function E(){let e=r.useContext(S);if(!e)throw Error("useChart must be used within a <ChartContainer />");return e}let L=r.forwardRef((e,t)=>{let{id:a,className:n,children:l,config:i,...o}=e,c=r.useId(),d="chart-".concat(a||c.replace(/:/g,""));return(0,s.jsx)(S.Provider,{value:{config:i},children:(0,s.jsxs)("div",{"data-chart":d,ref:t,className:(0,f.cn)("flex aspect-video justify-center text-xs [&_.recharts-cartesian-axis-tick_text]:fill-muted-foreground [&_.recharts-cartesian-grid_line[stroke='#ccc']]:stroke-border/50 [&_.recharts-curve.recharts-tooltip-cursor]:stroke-border [&_.recharts-dot[stroke='#fff']]:stroke-transparent [&_.recharts-layer]:outline-hidden [&_.recharts-polar-grid_[stroke='#ccc']]:stroke-border [&_.recharts-radial-bar-background-sector]:fill-muted [&_.recharts-rectangle.recharts-tooltip-cursor]:fill-muted [&_.recharts-reference-line_[stroke='#ccc']]:stroke-border [&_.recharts-sector[stroke='#fff']]:stroke-transparent [&_.recharts-sector]:outline-hidden [&_.recharts-surface]:outline-hidden",n),...o,children:[(0,s.jsx)(P,{id:d,config:i}),(0,s.jsx)(w.u,{children:l})]})})});L.displayName="Chart";let P=e=>{let{id:t,config:a}=e,r=Object.entries(a).filter(e=>{let[,t]=e;return t.theme||t.color});return r.length?(0,s.jsx)("style",{dangerouslySetInnerHTML:{__html:Object.entries(C).map(e=>{let[a,s]=e;return"\n".concat(s," [data-chart=").concat(t,"] {\n").concat(r.map(e=>{var t;let[s,r]=e,n=(null==(t=r.theme)?void 0:t[a])||r.color;return n?"  --color-".concat(s,": ").concat(n,";"):null}).join("\n"),"\n}\n")}).join("\n")}}):null},R=k.m,M=r.forwardRef((e,t)=>{let{active:a,payload:n,className:l,indicator:i="dot",hideLabel:o=!1,hideIndicator:c=!1,label:d,labelFormatter:u,labelClassName:m,formatter:x,color:p,nameKey:h,labelKey:g}=e,{config:v}=E(),j=r.useMemo(()=>{var e;if(o||!(null==n?void 0:n.length))return null;let[t]=n,a="".concat(g||(null==t?void 0:t.dataKey)||(null==t?void 0:t.name)||"value"),r=A(v,t,a),l=g||"string"!=typeof d?null==r?void 0:r.label:(null==(e=v[d])?void 0:e.label)||d;return u?(0,s.jsx)("div",{className:(0,f.cn)("font-medium",m),children:u(l,n)}):l?(0,s.jsx)("div",{className:(0,f.cn)("font-medium",m),children:l}):null},[d,u,n,o,m,v,g]);if(!a||!(null==n?void 0:n.length))return null;let b=1===n.length&&"dot"!==i;return(0,s.jsxs)("div",{ref:t,className:(0,f.cn)("grid min-w-32 items-start gap-1.5 rounded-lg border border-border/50 bg-background px-2.5 py-1.5 text-xs shadow-xl",l),children:[b?null:j,(0,s.jsx)("div",{className:"grid gap-1.5",children:n.map((e,t)=>{let a="".concat(h||e.name||e.dataKey||"value"),r=A(v,e,a),n=p||e.payload.fill||e.color;return(0,s.jsx)("div",{className:(0,f.cn)("flex w-full flex-wrap items-stretch gap-2 [&>svg]:h-2.5 [&>svg]:w-2.5 [&>svg]:text-muted-foreground","dot"===i&&"items-center"),children:x&&(null==e?void 0:e.value)!==void 0&&e.name?x(e.value,e.name,e,t,e.payload):(0,s.jsxs)(s.Fragment,{children:[(null==r?void 0:r.icon)?(0,s.jsx)(r.icon,{}):!c&&(0,s.jsx)("div",{className:(0,f.cn)("shrink-0 rounded-[2px] border-border bg-(--color-bg)",{"h-2.5 w-2.5":"dot"===i,"w-1":"line"===i,"w-0 border-[1.5px] border-dashed bg-transparent":"dashed"===i,"my-0.5":b&&"dashed"===i}),style:{"--color-bg":n,"--color-border":n}}),(0,s.jsxs)("div",{className:(0,f.cn)("flex flex-1 justify-between leading-none",b?"items-end":"items-center"),children:[(0,s.jsxs)("div",{className:"grid gap-1.5",children:[b?j:null,(0,s.jsx)("span",{className:"text-muted-foreground",children:(null==r?void 0:r.label)||e.name})]}),e.value&&(0,s.jsx)("span",{className:"font-mono font-medium tabular-nums text-foreground",children:e.value.toLocaleString()})]})]})},e.dataKey)})})]})});M.displayName="ChartTooltip";let z=_.s,I=r.forwardRef((e,t)=>{let{className:a,hideIcon:r=!1,payload:n,verticalAlign:l="bottom",nameKey:i}=e,{config:o}=E();return(null==n?void 0:n.length)?(0,s.jsx)("div",{ref:t,className:(0,f.cn)("flex items-center justify-center gap-4","top"===l?"pb-3":"pt-3",a),children:n.map(e=>{let t="".concat(i||e.dataKey||"value"),a=A(o,e,t);return(0,s.jsxs)("div",{className:(0,f.cn)("flex items-center gap-1.5 [&>svg]:h-3 [&>svg]:w-3 [&>svg]:text-muted-foreground"),children:[(null==a?void 0:a.icon)&&!r?(0,s.jsx)(a.icon,{}):(0,s.jsx)("div",{className:"h-2 w-2 shrink-0 rounded-[2px]",style:{backgroundColor:e.color}}),null==a?void 0:a.label]},e.value)})}):null});function A(e,t,a){if("object"!=typeof t||null===t)return;let s="payload"in t&&"object"==typeof t.payload&&null!==t.payload?t.payload:void 0,r=a;return a in t&&"string"==typeof t[a]?r=t[a]:s&&a in s&&"string"==typeof s[a]&&(r=s[a]),r in e?e[r]:e[a]}I.displayName="ChartLegend";var F=a(42152);function D(e){let{listingsCumulativeDepth:t=[],salesCumulativeDepth:a=[],currency:n="USD"}=e,l=(0,r.useMemo)(()=>(function(e,t){let a,s,r=Array.from(new Set([...e.map(e=>e.price),...t.map(e=>e.price)])).sort((e,t)=>e-t),n=Object.fromEntries(e.map(e=>[e.price,e.cumulativeCount])),l=Object.fromEntries(t.map(e=>[e.price,e.cumulativeCount]));return r.map(e=>(void 0!==n[e]&&(a=n[e]),void 0!==l[e]&&(s=l[e]),{price:e,listingCumulativeCount:a,salesCumulativeCount:t.length>0?s:void 0}))})(t,a),[t,a]);return(0,s.jsx)(L,{id:"market-depth-chart",className:"aspect-auto h-[250px] w-full",config:{listingCumulativeCount:{label:"Listings",color:"rgb(59 130 246)"},salesCumulativeCount:{label:"Sales",color:"rgb(34 197 94)"}},children:(0,s.jsxs)(j.Q,{data:l,margin:{top:0,right:0,left:0,bottom:0},children:[(0,s.jsxs)("defs",{children:[(0,s.jsxs)("linearGradient",{id:"listingsGradient",x1:"0",y1:"0",x2:"0",y2:"1",children:[(0,s.jsx)("stop",{offset:"0%",stopColor:"rgb(59 130 246)",stopOpacity:.8}),(0,s.jsx)("stop",{offset:"100%",stopColor:"rgb(59 130 246)",stopOpacity:.1})]}),(0,s.jsxs)("linearGradient",{id:"salesGradient",x1:"0",y1:"0",x2:"0",y2:"1",children:[(0,s.jsx)("stop",{offset:"0%",stopColor:"rgb(34 197 94)",stopOpacity:.8}),(0,s.jsx)("stop",{offset:"100%",stopColor:"rgb(34 197 94)",stopOpacity:.1})]})]}),(0,s.jsx)(b.W,{dataKey:"price",type:"number",tickLine:!1,axisLine:!1,tickMargin:8,domain:["dataMin","dataMax"],tickFormatter:e=>(0,F.vv)(e,n)}),(0,s.jsx)(y.h,{type:"number",domain:[0,"dataMax"],tickFormatter:e=>String(e),hide:!0}),(0,s.jsx)(R,{shared:!0,content:(0,s.jsx)(M,{labelFormatter:(e,t)=>{let a=t[0];return"Price: ".concat((0,F.vv)(a.payload.price,n))},formatter:(e,t)=>{if(void 0===e)return null;let a="listingCumulativeCount"===t||"Listings"===t;return[(0,s.jsxs)("div",{className:"flex items-center gap-2",children:[(0,s.jsx)("div",{className:"w-2 h-2 rounded-full",style:{backgroundColor:a?"rgb(59 130 246)":"rgb(34 197 94)"}}),(0,s.jsx)("span",{children:e})]},t),a?"Listings":"Sales"]}})}),(0,s.jsx)(z,{content:(0,s.jsx)(I,{})}),(0,s.jsx)(N.G,{type:"stepAfter",dataKey:"listingCumulativeCount",name:"Listings",stroke:"rgb(59 130 246)",fill:"url(#listingsGradient)",connectNulls:!0}),(0,s.jsx)(N.G,{type:"stepAfter",dataKey:"salesCumulativeCount",name:"Sales",stroke:"rgb(34 197 94)",fill:"url(#salesGradient)",connectNulls:!0})]})})}var T=a(48716);let O={LISTINGS_COLOR:"rgb(59 130 246)",REFERENCE_LINE_STROKE:"rgba(255, 255, 255, 0.6)",REFERENCE_LINE_LABEL:"rgba(255, 255, 255, 0.9)"};function G(e){let{listingsCumulativeDepth:t=[],currency:a="USD"}=e,[n,l]=(0,r.useState)(!1),i=(0,r.useMemo)(()=>t.map(e=>({price:e.price,listingCumulativeCount:e.cumulativeCount})),[t]),o=(0,r.useMemo)(()=>{if(0===i.length)return{low:{count:0,price:0},medium:{count:0,price:0},high:{count:0,price:0}};let e=[...i].sort((e,t)=>e.price-t.price),t=Math.floor(.33*e.length),a=Math.floor(.66*e.length),s=e.length-1,r=e[t],n=e[a],l=e[s];return{low:{count:Math.round(r.listingCumulativeCount),price:r.price},medium:{count:Math.round(n.listingCumulativeCount),price:n.price},high:{count:Math.round(l.listingCumulativeCount),price:l.price}}},[i]),c=(e,t)=>({stroke:O.REFERENCE_LINE_STROKE,strokeDasharray:"4 4",strokeWidth:.5,label:n?void 0:{value:t?"".concat(e," listings to be sold until ").concat((0,F.vv)(t,a)):"".concat(e," listings"),position:"top",style:{fill:O.REFERENCE_LINE_LABEL,fontSize:"11px",fontWeight:"500"}}});return(0,s.jsx)(L,{id:"market-depth-chart",className:"aspect-auto h-[250px] w-full",config:{listingCumulativeCount:{label:"Listings",color:O.LISTINGS_COLOR}},children:(0,s.jsxs)(j.Q,{data:i,margin:{top:20,right:0,left:0,bottom:0},onMouseEnter:()=>l(!0),onMouseLeave:()=>l(!1),children:[(0,s.jsx)("defs",{children:(0,s.jsxs)("linearGradient",{id:"listingsGradient",x1:"0",y1:"0",x2:"0",y2:"1",children:[(0,s.jsx)("stop",{offset:"0%",stopColor:O.LISTINGS_COLOR,stopOpacity:.8}),(0,s.jsx)("stop",{offset:"100%",stopColor:O.LISTINGS_COLOR,stopOpacity:.1})]})}),(0,s.jsx)(b.W,{dataKey:"price",type:"number",tickLine:!1,axisLine:!1,tickMargin:8,domain:["dataMin","dataMax"],tickFormatter:e=>(0,F.vv)(e,a)}),(0,s.jsx)(y.h,{type:"number",domain:[0,"dataMax + 10"],tickFormatter:e=>String(e),hide:!0}),(0,s.jsx)(T.e,{y:o.low.count,...c(o.low.count,o.low.price),style:{transition:"opacity 0.3s ease-in-out"}}),(0,s.jsx)(T.e,{y:o.medium.count,...c(o.medium.count,o.medium.price),style:{transition:"opacity 0.3s ease-in-out"}}),(0,s.jsx)(T.e,{y:o.high.count,...c(o.high.count,o.high.price),style:{transition:"opacity 0.3s ease-in-out"}}),(0,s.jsx)(R,{content:(0,s.jsx)(M,{labelFormatter:(e,t)=>{let[s]=t;return"Price: ".concat((0,F.vv)(s.payload.price,a))}})}),(0,s.jsx)(N.G,{type:"stepAfter",dataKey:"listingCumulativeCount",name:"Listings",stroke:O.LISTINGS_COLOR,fill:"url(#listingsGradient)",connectNulls:!0,opacity:n?1:.4,style:{transition:"opacity 0.3s ease-in-out"}})]})})}function q(e){let{listingsCumulativeDepth:t,currentPrice:a,isLoading:r}=e;return(0,s.jsxs)(p.Zp,{children:[(0,s.jsxs)(p.aR,{children:[(0,s.jsx)(p.ZB,{children:"Price leveling"}),(0,s.jsx)(p.BT,{children:"See how many listings need to be sold to reach different price points"})]}),(0,s.jsx)(v.w,{}),(0,s.jsx)(p.Wu,{className:"pt-4 w-full",children:r?(0,s.jsx)(h.E,{className:"w-full mb-1 h-[240px]"}):(0,s.jsx)("div",{className:"flex flex-col lg:flex-row gap-6 items-center",children:(0,s.jsx)("div",{className:"flex-1",children:t&&(0,s.jsx)(G,{listingsCumulativeDepth:t,currency:"USD"})})})})]})}var K=a(52619),U=a.n(K),B=a(83856),H=a(35299),W=a(74752);function Z(){return(0,s.jsxs)("span",{className:"relative flex size-3",children:[(0,s.jsx)("span",{className:"absolute inline-flex h-full w-full animate-ping rounded-full bg-blue-400 opacity-75"}),(0,s.jsx)("span",{className:"relative inline-flex size-3 rounded-full bg-blue-500"})]})}var J=a(30563),V=a(92273),X=a(93499),$=a(12108),Y=a(24033),Q=a(74054),ee=a(67812),et=a(97003);let ea=r.forwardRef((e,t)=>{let{className:a,...r}=e;return(0,s.jsx)("div",{className:"relative w-full overflow-auto",children:(0,s.jsx)("table",{ref:t,className:(0,f.cn)("w-full caption-bottom text-sm",a),...r})})});ea.displayName="Table";let es=r.forwardRef((e,t)=>{let{className:a,...r}=e;return(0,s.jsx)("thead",{ref:t,className:(0,f.cn)("[&_tr]:border-b",a),...r})});es.displayName="TableHeader";let er=r.forwardRef((e,t)=>{let{className:a,...r}=e;return(0,s.jsx)("tbody",{ref:t,className:(0,f.cn)("[&_tr:last-child]:border-0",a),...r})});er.displayName="TableBody",r.forwardRef((e,t)=>{let{className:a,...r}=e;return(0,s.jsx)("tfoot",{ref:t,className:(0,f.cn)("border-t bg-muted/50 font-medium last:[&>tr]:border-b-0",a),...r})}).displayName="TableFooter";let en=r.forwardRef((e,t)=>{let{className:a,...r}=e;return(0,s.jsx)("tr",{ref:t,className:(0,f.cn)("border-b transition-colors hover:bg-muted/50 data-[state=selected]:bg-muted",a),...r})});en.displayName="TableRow";let el=r.forwardRef((e,t)=>{let{className:a,...r}=e;return(0,s.jsx)("th",{ref:t,className:(0,f.cn)("h-10 px-2 text-left align-middle font-medium text-muted-foreground [&:has([role=checkbox])]:pr-0 [&>[role=checkbox]]:translate-y-[2px]",a),...r})});el.displayName="TableHead";let ei=r.forwardRef((e,t)=>{let{className:a,...r}=e;return(0,s.jsx)("td",{ref:t,className:(0,f.cn)("p-2 align-middle [&:has([role=checkbox])]:pr-0 [&>[role=checkbox]]:translate-y-[2px]",a),...r})});ei.displayName="TableCell",r.forwardRef((e,t)=>{let{className:a,...r}=e;return(0,s.jsx)("caption",{ref:t,className:(0,f.cn)("mt-4 text-sm text-muted-foreground",a),...r})}).displayName="TableCaption";let eo={NEAR_MINT:"Near Mint",LIGHTLY_PLAYED:"Lightly Played",MODERATELY_PLAYED:"Moderately Played",HEAVILY_PLAYED:"Heavily Played",DAMAGED:"Damaged"};function ec(e){switch(e.toLowerCase()){case"near mint":return 5;case"lightly played":return 4;case"moderately played":return 3;case"heavily played":return 2;case"damaged":return 1;default:return 0}}function ed(e){switch(e.toLowerCase()){case"near mint":return"bg-green-500";case"lightly played":return"bg-yellow-500";case"moderately played":return"bg-orange-500";case"heavily played":return"bg-red-500";case"damaged":return"bg-red-800";default:return"bg-gray-500"}}function eu(e){return"moderately played"===e.toLowerCase()?"Mod. Played":e}var em=a(99975),ex=a(90368),ep=a(27937),ef=a(90088),eh=a(90235),eg=a(55644),ev=a(5917);function ej(e){let{...t}=e;return(0,s.jsx)(eg.bL,{"data-slot":"select",...t})}function eb(e){let{...t}=e;return(0,s.jsx)(eg.WT,{"data-slot":"select-value",...t})}function ey(e){let{className:t,size:a="default",children:r,...n}=e;return(0,s.jsxs)(eg.l9,{"data-slot":"select-trigger","data-size":a,className:(0,f.cn)("border-input data-[placeholder]:text-muted-foreground [&_svg:not([class*='text-'])]:text-muted-foreground focus-visible:border-ring focus-visible:ring-ring/50 aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive dark:bg-input/30 dark:hover:bg-input/50 flex w-fit items-center justify-between gap-2 rounded-md border bg-transparent px-3 py-2 text-sm whitespace-nowrap shadow-xs transition-[color,box-shadow] outline-none focus-visible:ring-[3px] disabled:cursor-not-allowed disabled:opacity-50 data-[size=default]:h-9 data-[size=sm]:h-8 *:data-[slot=select-value]:line-clamp-1 *:data-[slot=select-value]:flex *:data-[slot=select-value]:items-center *:data-[slot=select-value]:gap-2 [&_svg]:pointer-events-none [&_svg]:shrink-0 [&_svg:not([class*='size-'])]:size-4",t),...n,children:[r,(0,s.jsx)(eg.In,{asChild:!0,children:(0,s.jsx)(Y.A,{className:"size-4 opacity-50"})})]})}function eN(e){let{className:t,children:a,position:r="popper",...n}=e;return(0,s.jsx)(eg.ZL,{children:(0,s.jsxs)(eg.UC,{"data-slot":"select-content",className:(0,f.cn)("bg-popover text-popover-foreground data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2 relative z-50 max-h-(--radix-select-content-available-height) min-w-[8rem] origin-(--radix-select-content-transform-origin) overflow-x-hidden overflow-y-auto rounded-md border shadow-md","popper"===r&&"data-[side=bottom]:translate-y-1 data-[side=left]:-translate-x-1 data-[side=right]:translate-x-1 data-[side=top]:-translate-y-1",t),position:r,...n,children:[(0,s.jsx)(ek,{}),(0,s.jsx)(eg.LM,{className:(0,f.cn)("p-1","popper"===r&&"h-[var(--radix-select-trigger-height)] w-full min-w-[var(--radix-select-trigger-width)] scroll-my-1"),children:a}),(0,s.jsx)(e_,{})]})})}function ew(e){let{className:t,children:a,...r}=e;return(0,s.jsxs)(eg.q7,{"data-slot":"select-item",className:(0,f.cn)("focus:bg-accent focus:text-accent-foreground [&_svg:not([class*='text-'])]:text-muted-foreground relative flex w-full cursor-default items-center gap-2 rounded-sm py-1.5 pr-8 pl-2 text-sm outline-hidden select-none data-[disabled]:pointer-events-none data-[disabled]:opacity-50 [&_svg]:pointer-events-none [&_svg]:shrink-0 [&_svg:not([class*='size-'])]:size-4 *:[span]:last:flex *:[span]:last:items-center *:[span]:last:gap-2",t),...r,children:[(0,s.jsx)("span",{className:"absolute right-2 flex size-3.5 items-center justify-center",children:(0,s.jsx)(eg.VF,{children:(0,s.jsx)(ev.A,{className:"size-4"})})}),(0,s.jsx)(eg.p4,{children:a})]})}function ek(e){let{className:t,...a}=e;return(0,s.jsx)(eg.PP,{"data-slot":"select-scroll-up-button",className:(0,f.cn)("flex cursor-default items-center justify-center py-1",t),...a,children:(0,s.jsx)($.A,{className:"size-4"})})}function e_(e){let{className:t,...a}=e;return(0,s.jsx)(eg.wn,{"data-slot":"select-scroll-down-button",className:(0,f.cn)("flex cursor-default items-center justify-center py-1",t),...a,children:(0,s.jsx)(Y.A,{className:"size-4"})})}let eC=[10,20,30,40,50];function eS(e){let{table:t,pageSizeOptions:a=eC}=e;return(0,s.jsxs)("div",{className:"flex items-center justify-between px-4",children:[(0,s.jsxs)("div",{className:"text-muted-foreground hidden flex-1 text-sm lg:flex",children:[t.getFilteredRowModel().rows.length," row(s) total."]}),(0,s.jsxs)("div",{className:"flex w-full items-center gap-8 lg:w-fit",children:[(0,s.jsxs)("div",{className:"hidden items-center gap-2 lg:flex",children:[(0,s.jsx)(eh.J,{htmlFor:"rows-per-page",className:"text-sm font-medium",children:"Rows per page"}),(0,s.jsxs)(ej,{value:"".concat(t.getState().pagination.pageSize),onValueChange:e=>{t.setPageSize(Number(e))},children:[(0,s.jsx)(ey,{size:"sm",className:"w-20",id:"rows-per-page",children:(0,s.jsx)(eb,{placeholder:t.getState().pagination.pageSize})}),(0,s.jsx)(eN,{side:"top",children:a.map(e=>(0,s.jsx)(ew,{value:"".concat(e),children:e},e))})]})]}),(0,s.jsxs)("div",{className:"flex w-fit items-center justify-center text-sm font-medium",children:["Page ",t.getState().pagination.pageIndex+1," of"," ",t.getPageCount()]}),(0,s.jsxs)("div",{className:"ml-auto flex items-center gap-2 lg:ml-0",children:[(0,s.jsx)(et.$,{variant:"outline",className:"hidden h-8 w-8 p-0 lg:flex",onClick:()=>t.setPageIndex(0),disabled:!t.getCanPreviousPage(),"aria-label":"Go to first page",children:(0,s.jsx)(em.A,{})}),(0,s.jsx)(et.$,{variant:"outline",className:"size-8",size:"icon",onClick:()=>t.previousPage(),disabled:!t.getCanPreviousPage(),"aria-label":"Go to previous page",children:(0,s.jsx)(ex.A,{})}),(0,s.jsx)(et.$,{variant:"outline",className:"size-8",size:"icon",onClick:()=>t.nextPage(),disabled:!t.getCanNextPage(),"aria-label":"Go to next page",children:(0,s.jsx)(ep.A,{})}),(0,s.jsx)(et.$,{variant:"outline",className:"hidden size-8 lg:flex",size:"icon",onClick:()=>t.setPageIndex(t.getPageCount()-1),disabled:!t.getCanNextPage(),"aria-label":"Go to last page",children:(0,s.jsx)(ef.A,{})})]})]})]})}let eE=[10,20,30,40,50],eL=[{key:"price",label:"Price (USD)"},{key:"condition",label:"Condition"},{key:"seller",label:"Seller"},{key:"actions",label:"Action",sticky:!0}],eP=[{accessorKey:"price",header:"Price (USD)",cell:e=>{let{row:t}=e,a=t.original;return(0,s.jsxs)("div",{className:"flex flex-col",children:[(0,s.jsx)("div",{className:"font-medium",children:(0,F.vv)(a.price)}),(0,s.jsx)("div",{className:"text-xs text-muted-foreground font-normal",children:a.shipping_price?0===a.shipping_price?"Free shipping":"+".concat((0,F.vv)(a.shipping_price)," shipping"):"Free shipping"})]})},sortingFn:(e,t)=>e.original.price-t.original.price},{accessorKey:"condition",header:"Condition",cell:e=>{let{row:t}=e,a=t.original.sku.condition.name;return(0,s.jsx)("div",{className:"w-32",children:(0,s.jsxs)(ee.E,{variant:"outline",className:"text-muted-foreground px-1.5 font-normal text-xs",children:[(0,s.jsx)("div",{className:"w-2 h-2 rounded-full ".concat(ed(a)," mr-2")}),eu(a)]})})},sortingFn:(e,t)=>ec(e.original.sku.condition.name)-ec(t.original.sku.condition.name)},{accessorKey:"seller_name",header:"Seller",cell:e=>{let{row:t}=e,a=t.original;return(0,s.jsxs)("div",{className:"flex flex-col",children:[(0,s.jsx)("div",{className:"font-medium",children:a.seller_name}),(0,s.jsxs)("div",{className:"font-mono text-xs text-muted-foreground",children:["TCG: ",a.listing_id]})]})},enableSorting:!1},{id:"actions",header:"Action",cell:e=>{let{row:t}=e,a=eA(t.original);return(0,s.jsx)(et.$,{variant:"outline",size:"sm",children:(0,s.jsxs)("a",{href:a,target:"_blank",rel:"noopener noreferrer",className:"flex items-center",children:[(0,s.jsx)(X.A,{className:"w-2 h-2 mr-2"}),"Purchase"]})})},enableSorting:!1}];function eR(e){var t;let{listings:a}=e,[n,l]=r.useState([{id:"condition",desc:!0}]),[i,o]=r.useState({}),[c,d]=r.useState({pageIndex:0,pageSize:10}),u=(0,J.N4)({data:a,columns:eP,state:{sorting:n,columnVisibility:i,pagination:c},onSortingChange:l,onColumnVisibilityChange:o,onPaginationChange:d,getCoreRowModel:(0,V.HT)(),getFilteredRowModel:(0,V.hM)(),getPaginationRowModel:(0,V.kW)(),getSortedRowModel:(0,V.h5)()});return(0,s.jsxs)("div",{className:"flex flex-col gap-4",children:[(0,s.jsx)(eI,{children:(0,s.jsxs)(ea,{children:[(0,s.jsx)(es,{children:u.getHeaderGroups().map(e=>(0,s.jsx)(en,{children:e.headers.map(e=>(0,s.jsx)(el,{colSpan:e.colSpan,className:"px-6 ".concat("actions"===e.column.id&&"sticky right-0 w-32"),onClick:e.column.getToggleSortingHandler(),children:e.isPlaceholder?null:(0,s.jsxs)("div",{className:"flex items-center gap-2",children:[(0,J.Kv)(e.column.columnDef.header,e.getContext()),e.column.getCanSort()&&(0,s.jsx)("span",{className:"text-xs text-muted-foreground",children:"asc"===e.column.getIsSorted()?(0,s.jsx)($.A,{className:"h-3 w-3"}):"desc"===e.column.getIsSorted()?(0,s.jsx)(Y.A,{className:"h-3 w-3"}):(0,s.jsx)(Q.A,{className:"h-3 w-3 opacity-50"})})]})},e.id))},e.id))}),(0,s.jsx)(er,{children:(null==(t=u.getRowModel().rows)?void 0:t.length)?u.getRowModel().rows.map(e=>{let t=eA(e.original);return(0,s.jsx)(en,{onClick:()=>window.open(t,"_blank","noopener,noreferrer"),children:e.getVisibleCells().map(e=>{let t="actions"===e.column.id;return(0,s.jsx)(ei,{className:"px-6 ".concat(t&&"sticky right-0 w-32"),children:(0,J.Kv)(e.column.columnDef.cell,e.getContext())},e.id)})},e.id)}):(0,s.jsx)(en,{children:(0,s.jsx)(ei,{colSpan:eP.length,className:"h-24 text-center",children:"No results"})})})]})}),(0,s.jsx)(eS,{table:u,pageSizeOptions:eE})]})}function eM(){return(0,s.jsx)(eI,{children:(0,s.jsxs)(ea,{children:[(0,s.jsx)(es,{children:(0,s.jsx)(en,{children:eL.map(e=>(0,s.jsx)(el,{className:"px-6 ".concat(e.sticky?"sticky right-0 w-32":""),children:e.label},e.key))})}),(0,s.jsx)(er,{children:Array.from({length:10}).map((e,t)=>(0,s.jsx)(ez,{},t))})]})})}function ez(){return(0,s.jsxs)(en,{children:[(0,s.jsx)(ei,{className:"px-6",children:(0,s.jsxs)("div",{className:"flex flex-col space-y-2",children:[(0,s.jsx)("div",{className:"h-4 w-16 bg-muted animate-pulse rounded"}),(0,s.jsx)("div",{className:"h-3 w-20 bg-muted animate-pulse rounded"})]})}),(0,s.jsx)(ei,{className:"px-6",children:(0,s.jsx)("div",{className:"w-32",children:(0,s.jsx)("div",{className:"h-6 w-24 bg-muted animate-pulse rounded"})})}),(0,s.jsx)(ei,{className:"px-6",children:(0,s.jsxs)("div",{className:"flex flex-col space-y-1",children:[(0,s.jsx)("div",{className:"h-4 w-20 bg-muted animate-pulse rounded"}),(0,s.jsx)("div",{className:"h-3 w-16 bg-muted animate-pulse rounded"})]})}),(0,s.jsx)(ei,{className:"px-6",children:(0,s.jsx)("div",{className:"h-4 w-8 bg-muted animate-pulse rounded"})}),(0,s.jsx)(ei,{className:"px-6 sticky right-0 w-32 bg-background",children:(0,s.jsx)("div",{className:"h-8 w-24 bg-muted animate-pulse rounded"})})]})}function eI(e){let{children:t}=e;return(0,s.jsx)("div",{className:"overflow-hidden rounded-lg border space-y-4 min-h-[550px]",children:t})}function eA(e){let t=e.sku.product.tcgplayer_url;t.startsWith("http://")||t.startsWith("https://")||(t="https://".concat(t));let a=e.seller_id||e.listing_id;return"".concat(t,"?seller=").concat(a,"&page=1&Language=English")}var eF=a(90923);function eD(e){let{listings:t,selectedCondition:a,onConditionSelect:r}=e,n=Object.values(eo).map(e=>{let a=t.filter(t=>t.sku.condition.name===e);if(0===a.length)return null;let s=a.reduce((e,t)=>e+t.price,0);return{name:e,count:a.length,averagePrice:s/a.length}}).filter(F.zz);return n.sort((e,t)=>ec(t.name)-ec(e.name)),(0,s.jsx)(eF.tU,{value:a||"all",onValueChange:e=>r("all"===e?null:e),className:"mb-4",children:(0,s.jsxs)(eF.j7,{children:[(0,s.jsxs)(eF.Xi,{value:"all",className:"flex gap-2 items-center",children:["All",(0,s.jsx)(ee.E,{variant:"outline",className:"flex gap-2 items-center text-[10px] text-muted-foreground",children:t.length})]}),n.map(e=>(0,s.jsx)(eF.Xi,{value:e.name,children:(0,s.jsxs)("div",{className:"flex items-center gap-2",children:[(0,s.jsx)("div",{className:"w-2 h-2 rounded-full ".concat(ed(e.name))}),(0,s.jsx)("span",{children:eu(e.name)}),(0,s.jsxs)(ee.E,{variant:"outline",className:"flex gap-2 items-center text-xs",children:[(0,F.vv)(e.averagePrice)," ",(0,s.jsx)("span",{className:"text-[10px] text-muted-foreground",children:e.count})]})]})},e.name))]})})}var eT=a(36242),eO=a(18752);function eG(){var e,t,a,n,l,d;let{sku:p}=(0,x.useParams)();(0,B.v)("string"==typeof p,"Invalid SKU");let{data:f,isLoading:h}=(0,m.I)((0,u.II)(p)),{data:g,isLoading:j}=(0,m.I)({...(0,u.cz)(p),enabled:!!f}),b=(0,r.useMemo)(()=>g?new Map(g.prices.map(e=>[e.sku_id,e.lowest_listing_price_total])):new Map,[g]),y=f&&(null==(e=f.skus)?void 0:e.length)>0?(0,F.dT)(f.skus):null,N=y?b.get(y.id):null,{data:w}=(0,m.I)(function(e){let{sku:t,salesLookbackDays:a}=e;return(0,i.j)({queryKey:["marketDepth",t],queryFn:()=>c(t,a),select:o})}({sku:p,salesLookbackDays:7}));return h||f?(0,s.jsx)("div",{className:"flex flex-col md:flex-row min-h-screen",children:(0,s.jsxs)("div",{className:"md:flex w-full",children:[(0,s.jsx)("div",{className:"md:w-80 md:flex-shrink-0 p-6 md:border-r md:bg-background/50 md:sticky md:top-[62px] md:h-[calc(100vh-62px)] md:overflow-y-auto ",children:(0,s.jsxs)("div",{className:"space-y-6",children:[(0,s.jsx)(eU,{productName:null==f?void 0:f.name,productSetName:null==f||null==(t=f.set)?void 0:t.name,productSetID:null==f||null==(a=f.set)?void 0:a.id,imageUrl:null==f?void 0:f.image_url,isLoading:h}),(0,s.jsx)(eB,{totalQuantity:null!=(l=null==w||null==(n=w.metrics)?void 0:n.total_quantity)?l:null,lowestListingPriceTotal:null!=N?N:null,productURL:null!=(d=null==f?void 0:f.tcgplayer_url)?d:null,isLoading:j})]})}),(0,s.jsxs)("div",{className:"flex-1 p-6 space-y-6",children:[(0,s.jsxs)("div",{className:"flex flex-row gap-4 items-center",children:[w?(0,s.jsx)(Z,{}):(0,s.jsx)(H.A,{className:"w-3 h-3 animate-spin"}),(0,s.jsx)("h2",{className:"text-lg font-medium",children:"Performance monitoring"})]}),(0,s.jsxs)("div",{className:"flex flex-col gap-4",children:[(0,s.jsx)(eW,{listingsCumulativeDepth:null==w?void 0:w.listingChartData,salesCumulativeDepth:null==w?void 0:w.salesChartData}),(0,s.jsx)(q,{listingsCumulativeDepth:null==w?void 0:w.listingChartData,currentPrice:null!=N?N:void 0,isLoading:!w})]}),(0,s.jsx)(v.w,{className:"my-8"}),(null==f?void 0:f.id)&&(0,s.jsx)(eH,{productId:f.id})]})]})}):(0,s.jsx)("div",{className:"flex items-center justify-center min-h-[calc(100vh-62px)]",children:(0,s.jsx)(eT.p,{icon:eO.A,title:"Product not found",description:"The product you're looking for doesn't exist or has been removed."})})}function eq(e){let{imageUrl:t,name:a,isLoading:r,ratio:l=1}=e,i=Math.round(534*l),o=Math.round(800*l);return r?(0,s.jsx)(h.E,{className:"rounded-[10px]  mx-auto lg:mx-0",style:{width:"".concat(i,"px"),height:"".concat(o,"px")}}):((0,B.J)(t),(0,B.J)(a),(0,s.jsx)(W.X,{src:(0,n.I)({imageUrl:t,size:800}),alt:a,containerClassName:"w-full h-full",className:"rounded-[10px] mx-auto lg:mx-0",style:{width:"".concat(i,"px"),height:"".concat(o,"px")}}))}function eK(e){let{productName:t,productSetName:a,productSetID:r,isLoading:n}=e;return n?(0,s.jsxs)("div",{className:"py-2",children:[(0,s.jsx)(h.E,{className:"h-4 w-3/4 mb-1"}),(0,s.jsx)(h.E,{className:"h-4 w-full mb-1"})]}):((0,B.J)(t,"Product name is required"),(0,B.J)(a,"Product set name is required"),(0,B.J)(r,"Product set ID is required"),(0,s.jsxs)("div",{children:[(0,s.jsx)(p.ZB,{className:"text-xl font-bold",children:t}),(0,s.jsx)(U(),{target:"_blank",href:"/market/set/".concat(r),className:"underline text-muted-foreground text-xs",children:a})]}))}function eU(e){let{productName:t,productSetName:a,productSetID:r,isLoading:n,imageUrl:l}=e;return n?(0,s.jsxs)(p.Zp,{children:[(0,s.jsxs)(p.aR,{children:[(0,s.jsx)(h.E,{className:"h-4 w-3/4 mb-1"}),(0,s.jsx)(h.E,{className:"h-4 w-3/4 mb-1"})]}),(0,s.jsx)(p.Wu,{className:"min-h-[150px]"})]}):((0,B.J)(t,"Product name is required"),(0,B.J)(a,"Product set name is required"),(0,B.J)(r,"Product set ID is required"),(0,s.jsxs)(p.Zp,{className:"pb-0 pt-4",children:[(0,s.jsx)(p.aR,{className:"hidden md:block",children:(0,s.jsx)(eK,{productName:t,productSetName:a,productSetID:r,isLoading:n})}),(0,s.jsx)("div",{className:"w-full h-full bg-white flex items-center justify-center py-2 rounded-b-xl",children:(0,s.jsx)(eq,{imageUrl:l,name:t,ratio:.2,isLoading:n})})]}))}function eB(e){let{totalQuantity:t,lowestListingPriceTotal:a,productURL:r,isLoading:n}=e;return(0,s.jsx)(g,{title:(0,s.jsxs)("div",{className:"flex gap-1",children:["string"===r?(0,s.jsx)(U(),{href:r,target:"_blank",className:"underline text-muted-foreground text-xs",children:"TCGPlayer"}):(0,s.jsx)("span",{className:"text-muted-foreground text-xs",children:"TCGPlayer"}),(0,s.jsx)("span",{className:"text-muted-foreground text-xs",children:"Market Price"})]}),value:n?(0,s.jsx)(h.E,{className:"h-8 w-3/4 mb-1"}):(0,F.vv)(a),subtitle:n?(0,s.jsx)(h.E,{className:"h-4 w-32"}):"From ".concat(t," units in the market")})}function eH(e){let{productId:t}=e,[a,n]=(0,r.useState)(null),{data:l,isLoading:o}=(0,m.I)((0,i.j)({queryKey:["productListings",t],queryFn:()=>d(t),select:e=>({...e,results:e.results.map(e=>({...e,price:Number(e.price)||0,shipping_price:Number(e.shipping_price)||0}))})})),c=(null==l?void 0:l.results)||[],u=a?c.filter(e=>{var t;return t=e.sku.condition.name,Object.values(eo).includes(t)&&e.sku.condition.name===a}):c;return o?(0,s.jsx)(eM,{}):(0,s.jsxs)("div",{children:[(0,s.jsx)(eD,{listings:c,selectedCondition:a,onConditionSelect:n}),(0,s.jsx)(eR,{listings:u})]})}function eW(e){let{listingsCumulativeDepth:t,salesCumulativeDepth:a}=e;return(0,s.jsxs)(p.Zp,{children:[(0,s.jsxs)(p.aR,{children:[(0,s.jsx)(p.ZB,{children:"Depth analysis"}),(0,s.jsx)(p.BT,{children:"Showing total listings and sales for the last 7 days"})]}),(0,s.jsx)(v.w,{}),(0,s.jsx)(p.Wu,{className:"pt-4 w-full",children:t&&a?(0,s.jsx)(D,{listingsCumulativeDepth:t,salesCumulativeDepth:a,currency:"USD"}):(0,s.jsx)(h.E,{className:"w-full mb-1 h-[240px]"})})]})}}},e=>{e.O(0,[958,850,999,332,127,216,319,441,255,358],()=>e(e.s=22258)),_N_E=e.O()}]);